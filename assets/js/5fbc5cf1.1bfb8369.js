"use strict";(self.webpackChunkdoc_elixir=self.webpackChunkdoc_elixir||[]).push([[207],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>c});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var o=r.createContext({}),s=function(e){var t=r.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=s(e.components);return r.createElement(o.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,o=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),u=s(a),k=n,c=u["".concat(o,".").concat(k)]||u[k]||m[k]||l;return a?r.createElement(c,i(i({ref:t},d),{},{components:a})):r.createElement(c,i({ref:t},d))}));function c(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,i=new Array(l);i[0]=k;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p[u]="string"==typeof e?e:n,i[1]=p;for(var s=2;s<l;s++)i[s]=a[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}k.displayName="MDXCreateElement"},7480:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>s});var r=a(7462),n=(a(7294),a(3905));const l={sidebar_position:3,sidebar_label:"Mini-Project #1 - API (serveur)"},i="Mini-Project #1 - API (Phoenix Framework - Elixir - Rest API)",p={unversionedId:"api",id:"api",title:"Mini-Project #1 - API (Phoenix Framework - Elixir - Rest API)",description:"1 - API (Phoenix Framework - Elixir - Rest API)",source:"@site/docs/api.md",sourceDirName:".",slug:"/api",permalink:"/docs/api",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Mini-Project #1 - API (serveur)"},sidebar:"docs",previous:{title:"Pr\xe9requis",permalink:"/docs/prerequisites"},next:{title:"Mini-Project #2 - Frontend (client)",permalink:"/docs/frontend"}},o={},s=[{value:"Initalisation du projet",id:"initalisation-du-projet",level:2},{value:"Cr\xe9ation des sch\xe9mas",id:"cr\xe9ation-des-sch\xe9mas",level:2},{value:"D\xe9finition du router",id:"d\xe9finition-du-router",level:2},{value:"Customisation des routes",id:"customisation-des-routes",level:2},{value:"Filtrage du r\xe9sultat pour matcher un param\xe8tre d&#39;URL",id:"filtrage-du-r\xe9sultat-pour-matcher-un-param\xe8tre-durl",level:3},{value:"Ajout d&#39;un param\xe8tre d&#39;URL \xe0 un body pour insertion",id:"ajout-dun-param\xe8tre-durl-\xe0-un-body-pour-insertion",level:3},{value:"CORS (Cross Origin Resource Sharing)",id:"cors-cross-origin-resource-sharing",level:2},{value:"Ajout de la d\xe9pendance cors_plug",id:"ajout-de-la-d\xe9pendance-cors_plug",level:3},{value:"Mise en place de CORSPlug",id:"mise-en-place-de-corsplug",level:3},{value:"Configuration de CORSPlug",id:"configuration-de-corsplug",level:3},{value:"API references",id:"api-references",level:2},{value:"\u2713 Users API",id:"-users-api",level:3},{value:"R\xe9cuperer tous les utilisateurs",id:"r\xe9cuperer-tous-les-utilisateurs",level:4},{value:"Requ\xeate HTTP",id:"requ\xeate-http",level:5},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http",level:5},{value:"R\xe9cuperer un utilisateur",id:"r\xe9cuperer-un-utilisateur",level:4},{value:"Requ\xeate HTTP",id:"requ\xeate-http-1",level:5},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http-1",level:5},{value:"Cr\xe9er un utilisateur",id:"cr\xe9er-un-utilisateur",level:4},{value:"Requ\xeate HTTP",id:"requ\xeate-http-2",level:5},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http-2",level:5},{value:"Modifier un utilisateur",id:"modifier-un-utilisateur",level:4},{value:"Requ\xeate HTTP",id:"requ\xeate-http-3",level:5},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http-3",level:5},{value:"Supprimer un utilisateur",id:"supprimer-un-utilisateur",level:4},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http-4",level:5},{value:"\u2713 WorkingTime API",id:"-workingtime-api",level:3},{value:"R\xe9cuperer tous les workingtimes",id:"r\xe9cuperer-tous-les-workingtimes",level:4},{value:"R\xe9cuperer un workingtime",id:"r\xe9cuperer-un-workingtime",level:4},{value:"Cr\xe9er un workingtime",id:"cr\xe9er-un-workingtime",level:4},{value:"Modifier un workingtime",id:"modifier-un-workingtime",level:4},{value:"Supprimer un workingtime",id:"supprimer-un-workingtime",level:4},{value:"\u2713 Clock API",id:"-clock-api",level:3},{value:"R\xe9cuperer les clocks",id:"r\xe9cuperer-les-clocks",level:4},{value:"Cr\xe9er une clock",id:"cr\xe9er-une-clock",level:4}],d={toc:s},u="wrapper";function m(e){let{components:t,...a}=e;return(0,n.kt)(u,(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"mini-project-1---api-phoenix-framework---elixir---rest-api"},"Mini-Project #1 - API (Phoenix Framework - Elixir - Rest API)"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Objectif :")," R\xe9aliser une API REST pour g\xe9rer une pointeuse"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Contraintes :")," Utilisation de Phoenix Framework - Routes et sch\xe9mas impos\xe9s - Base de donn\xe9es PostgreSQL"),(0,n.kt)("h2",{id:"initalisation-du-projet"},"Initalisation du projet"),(0,n.kt)("p",null,"Initalisation et acc\xe8s au projet :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"mix phx.new api --app api --no-html --no-assets\ncd api/\n")),(0,n.kt)("p",null,"Installation des d\xe9pendances :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"mix deps.get\n")),(0,n.kt)("p",null,"Execution des migrations / Mise en place de la base de donn\xe9es :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"mix ecto.reset\n")),(0,n.kt)("p",null,"Lancer le projet :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"mix phx.server\n")),(0,n.kt)("p",null,"Le projet est d\xe9sormais accessible \xe0 l'url ",(0,n.kt)("a",{parentName:"p",href:"http://localhost:4000"},"http://localhost:4000")),(0,n.kt)("h2",{id:"cr\xe9ation-des-sch\xe9mas"},"Cr\xe9ation des sch\xe9mas"),(0,n.kt)("p",null,"La commande permettant de cr\xe9er un sch\xe9ma JSON est la suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"mix phx.gen.json [context] [schema_name] [table_name] [field:type, ...]\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'users = {\n  "username": "string",\n  "email": "string"\n}\n\nclocks = {\n  "time": "datetime",\n  "status": "boolean",\n  "user": "users"\n}\n\nworkingtimes = {\n  "start": "datetime",\n  "end": "datetime",\n  "user": "users"\n}\n')),(0,n.kt)("p",null,"Nous g\xe9n\xe9rons les sch\xe9mas ci-dessus avec les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"mix phx.gen.json ApiWeb User users username:string email:string\nmix phx.gen.json ApiWeb Clock clocks time:datetime status:boolean user:references:users\nmix phx.gen.json ApiWeb WorkingTime workingtimes start:datetime end:datetime user:references:users\n")),(0,n.kt)("h2",{id:"d\xe9finition-du-router"},"D\xe9finition du router"),(0,n.kt)("p",null,"Le router permet de rediriger les appels vers le bon Controller (Architechture MVC), la ligne suivante permet de 'bind' une route \xe0 un controller :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-elixir"},'resources "/workingtimes", WorkingTimesController, only: [:update, :delete]\n')),(0,n.kt)("p",null,'Le fichier "api/lib/api_web/router.ex" :'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-elixir"},'defmodule ApiWeb.Router do\n  use ApiWeb, :router\n\n  pipeline :api do\n    plug :accepts, ["json"] # incoming type accepted\n  end\n\n  scope "/api", ApiWeb do\n    pipe_through :api\n\n    # Links /users/* calls to UsersController file\n    resources "/users", UsersController, only: [:index, :show, :create, :update, :delete] \n    resources "/workingtimes", WorkingTimesController, only: [:update, :delete]\n    resources "/workingtimes/:userID", WorkingTimesController, only: [:index, :show, :create]\n    resources "/clocks/:userID", ClocksController, only: [:index, :create]\n  end\n\n  [...]\nend\n\n')),(0,n.kt)("h2",{id:"customisation-des-routes"},"Customisation des routes"),(0,n.kt)("p",null,"Les routes par sont par d\xe9faut pr\xe9-g\xe9n\xe9r\xe9es, mais dans notre cas plusieurs modifications ont \xe9t\xe9 apport\xe9es pour s'adapter au sujet."),(0,n.kt)("h3",{id:"filtrage-du-r\xe9sultat-pour-matcher-un-param\xe8tre-durl"},"Filtrage du r\xe9sultat pour matcher un param\xe8tre d'URL"),(0,n.kt)("p",null,"Pour l'insertion d'une clock il faut le user_id, nous avons surcharg\xe9 la fonction de base index() qui permet de r\xe9cuperer l'ensemble des Clock pour qu'elle puisse traiter les cas avec/sans userID."),(0,n.kt)("p",null,"Nous rajoutons au dessus notre fonction appel\xe9e si le parametre d'url userID est renseign\xe9 :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-elixir"},'# endpoint : {base_url}/clocks/:userID, method : GET\ndef index(conn, %{"userID" => userID}) do\n  userID = String.to_integer(userID)\n  clocks = WebApi.list_clocks()\n  filtered_users = Enum.filter(clocks, fn clock -> clock.user == userID end)\n  render(conn, :index, clocks: filtered_users)\nend\n\n# endpoint : {base_url}/clocks, method : GET\ndef index(conn, _params) do\n  clocks = WebApi.list_clocks()\n  render(conn, :index, clocks: clocks)\nend\n')),(0,n.kt)("h3",{id:"ajout-dun-param\xe8tre-durl-\xe0-un-body-pour-insertion"},"Ajout d'un param\xe8tre d'URL \xe0 un body pour insertion"),(0,n.kt)("p",null,"Lors de l'insertion d'une Clock, on pr\xe9cise dans l'url le user_id associ\xe9, il faut rajouter ce champ au body pour pouvoir l'envoyer et l'ins\xe9rer dans la base de donn\xe9es"),(0,n.kt)("p",null,"Le body \xe9tant de type Map, on peut utiliser les fonctions fournies par cette classe :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-elixir"},'# Ajoute le champ "user": ${userID} \xe0 l\'objet clocks_params\nclocks_params = Map.put(clocks_params, "user", userID)\n')),(0,n.kt)("p",null,"La fonction create() compl\xe8te :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-elixir"},'def create(conn, %{"clocks" => clocks_params, "userID" => userID}) do\n  clocks_params = Map.put(clocks_params, "user", userID)\n  with {:ok, %Clocks{} = clocks} <- WebApi.create_clocks(clocks_params) do\n    conn\n    |> put_status(:created)\n    |> put_resp_header("location", ~p"/api/clocks/#{clocks}")\n    |> render(:show, clocks: clocks)\n  end\nend\n')),(0,n.kt)("h2",{id:"cors-cross-origin-resource-sharing"},"CORS (Cross Origin Resource Sharing)"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://hexdocs.pm/cors_plug/readme.html"},"Tutoriel Phoenix officiel"))),(0,n.kt)("h3",{id:"ajout-de-la-d\xe9pendance-cors_plug"},"Ajout de la d\xe9pendance cors_plug"),(0,n.kt)("p",null,"Dans le fichier ",(0,n.kt)("em",{parentName:"p"},"mix.exs")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-elixir"},'def deps do\n  # ...\n  {:cors_plug, "~> 3.0"},\n  #...\nend\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"# Fetch new cors dependency\n$ mix deps.get\n")),(0,n.kt)("h3",{id:"mise-en-place-de-corsplug"},"Mise en place de CORSPlug"),(0,n.kt)("p",null,"Dans le fichier ",(0,n.kt)("em",{parentName:"p"},"your_app/lib/api_web/endpoint.ex")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-elixir"},"defmodule ApiWeb.Endpoint do\n  use Phoenix.Endpoint, otp_app: :api\n\n  # [...]\n\n  plug CORSPlug # => Enables CORS server-side\n  plug ApiWeb.Router\nend\n")),(0,n.kt)("h3",{id:"configuration-de-corsplug"},"Configuration de CORSPlug"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-elixir"},'plug CORSPlug, origin: ["http://origin1.com", "http://origin2.com"]\n')),(0,n.kt)("h2",{id:"api-references"},"API references"),(0,n.kt)("h3",{id:"-users-api"},"\u2713 Users API"),(0,n.kt)("h4",{id:"r\xe9cuperer-tous-les-utilisateurs"},"R\xe9cuperer tous les utilisateurs"),(0,n.kt)("h5",{id:"requ\xeate-http"},"Requ\xeate HTTP"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  GET http://localhost:4000/api/users\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"email"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Optionnel"),". L'email de l'utilisateur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"username"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Optionnel"),". L'username de l'utilisateur")))),(0,n.kt)("h5",{id:"r\xe9ponse-http"},"R\xe9ponse HTTP"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Statut"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Raison"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"200 OK"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Succ\xe8s")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'  HTTP/1.1 200\n  Content-Type: application/json\n\n{\n  "data": [\n      {\n          "id": 34,\n          "username": "test",\n          "email": "test@test.fr"\n      },\n      {\n          "id": 35,\n          "username": "test",\n          "email": "test@test.fr"\n      }\n  ]\n}\n')),(0,n.kt)("h4",{id:"r\xe9cuperer-un-utilisateur"},"R\xe9cuperer un utilisateur"),(0,n.kt)("h5",{id:"requ\xeate-http-1"},"Requ\xeate HTTP"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  GET  http://localhost:4000/api/users/:userID\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"userID"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"integer - uid")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Id technique de l'utilisateur")))),(0,n.kt)("h5",{id:"r\xe9ponse-http-1"},"R\xe9ponse HTTP"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Statut"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Raison"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"200 OK"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Succ\xe8s")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"404 Not Found"),(0,n.kt)("td",{parentName:"tr",align:"left"},"userID inexistant")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'  HTTP/1.1 200\n  Content-Type: application/json\n\n{\n  "data": {\n      "id": 34,\n      "username": "test",\n      "email": "test@test.fr"\n  }\n}\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},"  HTTP/1.1 404\n  Content-Type: text/html\n")),(0,n.kt)("h4",{id:"cr\xe9er-un-utilisateur"},"Cr\xe9er un utilisateur"),(0,n.kt)("h5",{id:"requ\xeate-http-2"},"Requ\xeate HTTP"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  POST  http://localhost:4000/api/users\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"username"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Nom d'utilisateur du nouvel utilisateur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"email"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Adresse email du nouvel utilisateur")))),(0,n.kt)("h5",{id:"r\xe9ponse-http-2"},"R\xe9ponse HTTP"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Statut"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Raison"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"201 Created"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Cr\xe9ation r\xe9ussie")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"400 Bad Request"),(0,n.kt)("td",{parentName:"tr",align:"left"},"username et/ou email manquant")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'  HTTP/1.1 201\n  Content-Type: application/json\n\n{\n  "data": {\n      "id": 37,\n      "username": "test",\n      "email": "romain.rosso@epitech.eu"\n  }\n}\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},"  HTTP/1.1 400\n  Content-Type: text/html\n")),(0,n.kt)("h4",{id:"modifier-un-utilisateur"},"Modifier un utilisateur"),(0,n.kt)("h5",{id:"requ\xeate-http-3"},"Requ\xeate HTTP"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  PUT  http://localhost:4000/api/users/:userID\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"userID"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"integer - uid")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Id technique de l'utilisateur \xe0 modifier")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"username"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Nouveau nom d'utilisateur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"email"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Nouvelle adresse email")))),(0,n.kt)("h5",{id:"r\xe9ponse-http-3"},"R\xe9ponse HTTP"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Statut"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Raison"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"201 Created"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Cr\xe9ation r\xe9ussie")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"400 Bad Request"),(0,n.kt)("td",{parentName:"tr",align:"left"},"username et/ou email manquant")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'  HTTP/1.1 201\n  Content-Type: application/json\n\n{\n  "data": {\n      "id": 37,\n      "username": "test",\n      "email": "romain.rosso@epitech.eu"\n  }\n}\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},"  HTTP/1.1 400\n  Content-Type: text/html\n")),(0,n.kt)("h4",{id:"supprimer-un-utilisateur"},"Supprimer un utilisateur"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  DELETE  http://localhost:4000/api/users/:userID\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"userID"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"integer - uid")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Id technique de l'utilisateur \xe0 supprimer")))),(0,n.kt)("h5",{id:"r\xe9ponse-http-4"},"R\xe9ponse HTTP"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Statut"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Raison"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"200 OK"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Cr\xe9ation r\xe9ussie")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"400 Bad Request"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body manquant")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'  HTTP/1.1 200\n  Content-Type: application/json\n\n{\n  "data": {\n      "id": 37,\n      "username": "test",\n      "email": "romain.rosso@epitech.eu"\n  }\n}\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},"  HTTP/1.1 400\n  Content-Type: text/html\n")),(0,n.kt)("h3",{id:"-workingtime-api"},"\u2713 WorkingTime API"),(0,n.kt)("h4",{id:"r\xe9cuperer-tous-les-workingtimes"},"R\xe9cuperer tous les workingtimes"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  GET http://localhost:4000/api/workingtimes/:userID?start=XXX&end=YYY\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"userID"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". L'identifiant technique de l'utilisateur associ\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"start"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"datetime - (format : dd-MM-yyyy)")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Optionnel"),". La date \xe0 partir de laquelle chercher")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"end"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"datetime - (format: dd-MM-yyyy)")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Optionnel"),". La date avant laquelle chercher")))),(0,n.kt)("h4",{id:"r\xe9cuperer-un-workingtime"},"R\xe9cuperer un workingtime"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  GET  http://localhost:4000/api/workingtimes/:userID/:id\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"userID"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"integer - uid")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Id technique de l'utilisateur associ\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"id"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"integer - uid")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Id technique du workingtime \xe0 r\xe9cuperer")))),(0,n.kt)("h4",{id:"cr\xe9er-un-workingtime"},"Cr\xe9er un workingtime"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  POST  http://localhost:4000/api/workingtimes/:userID\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"userID"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Identifiant technique de l'utilisateur associ\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"start"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"datetime - (format : dd-MM-yyyy)")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Date de d\xe9but")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"end"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"datetime - (format : dd-MM-yyyy)")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Date de fin")))),(0,n.kt)("h4",{id:"modifier-un-workingtime"},"Modifier un workingtime"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  PUT  http://localhost:4000/api/workingtimes/:id\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"id"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"integer - uid")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Id technique du workingtime \xe0 modifier")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"start"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"datetime - (format : dd-MM-yyyy)")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Date de d\xe9but")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"end"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"datetime - (format : dd-MM-yyyy)")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Date de fin")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"user"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"integer - uid")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Utilisateur associ\xe9")))),(0,n.kt)("h4",{id:"supprimer-un-workingtime"},"Supprimer un workingtime"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  DELETE  http://localhost:4000/api/workingtimes/:id\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"id"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"integer - uid")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Id technique du workingtime \xe0 supprimer")))),(0,n.kt)("h3",{id:"-clock-api"},"\u2713 Clock API"),(0,n.kt)("h4",{id:"r\xe9cuperer-les-clocks"},"R\xe9cuperer les clocks"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  GET http://localhost:4000/api/clocks/:userID\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"userID"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". L'identifiant technique de l'utilisateur associ\xe9")))),(0,n.kt)("h4",{id:"cr\xe9er-une-clock"},"Cr\xe9er une clock"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-http"},"  POST http://localhost:4000/api/clocks/:userID\n")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type technique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Type de param\xe8tre"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"userID"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"string")),(0,n.kt)("td",{parentName:"tr",align:"left"},"URL"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". L'identifiant technique de l'utilisateur associ\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"time"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},'datetime - (format : "dd-MM-yyyy")')),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". L'heure de la clock")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"status"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"boolean")),(0,n.kt)("td",{parentName:"tr",align:"left"},"Body"),(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("strong",{parentName:"td"},"Obligatoire"),". Le status de la clock")))))}m.isMDXComponent=!0}}]);