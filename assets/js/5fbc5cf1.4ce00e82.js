"use strict";(self.webpackChunkdoc_elixir=self.webpackChunkdoc_elixir||[]).push([[207],{8594:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>a});var r=n(5893),s=n(3905);const l={sidebar_position:3,sidebar_label:"Mini-Project #1 - API (serveur)"},i="Mini-Project #1 - API (Phoenix Framework - Elixir - Rest API)",d={id:"api",title:"Mini-Project #1 - API (Phoenix Framework - Elixir - Rest API)",description:"1 - API (Phoenix Framework - Elixir - Rest API)",source:"@site/docs/api.md",sourceDirName:".",slug:"/api",permalink:"/docs/api",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Mini-Project #1 - API (serveur)"},sidebar:"docs",previous:{title:"Pr\xe9requis",permalink:"/docs/prerequisites"},next:{title:"Mini-Project #2 - Frontend (client)",permalink:"/docs/frontend"}},c={},a=[{value:"Initalisation du projet",id:"initalisation-du-projet",level:2},{value:"Cr\xe9ation des sch\xe9mas",id:"cr\xe9ation-des-sch\xe9mas",level:2},{value:"D\xe9finition du router",id:"d\xe9finition-du-router",level:2},{value:"Customisation des routes",id:"customisation-des-routes",level:2},{value:"Filtrage du r\xe9sultat pour matcher un param\xe8tre d&#39;URL",id:"filtrage-du-r\xe9sultat-pour-matcher-un-param\xe8tre-durl",level:3},{value:"Ajout d&#39;un param\xe8tre d&#39;URL \xe0 un body pour insertion",id:"ajout-dun-param\xe8tre-durl-\xe0-un-body-pour-insertion",level:3},{value:"CORS (Cross Origin Resource Sharing)",id:"cors-cross-origin-resource-sharing",level:2},{value:"Ajout de la d\xe9pendance cors_plug",id:"ajout-de-la-d\xe9pendance-cors_plug",level:3},{value:"Mise en place de CORSPlug",id:"mise-en-place-de-corsplug",level:3},{value:"Configuration de CORSPlug",id:"configuration-de-corsplug",level:3},{value:"API references",id:"api-references",level:2},{value:"\u2713 Users API",id:"-users-api",level:3},{value:"R\xe9cuperer tous les utilisateurs",id:"r\xe9cuperer-tous-les-utilisateurs",level:4},{value:"Requ\xeate HTTP",id:"requ\xeate-http",level:5},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http",level:5},{value:"R\xe9cuperer un utilisateur",id:"r\xe9cuperer-un-utilisateur",level:4},{value:"Requ\xeate HTTP",id:"requ\xeate-http-1",level:5},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http-1",level:5},{value:"Cr\xe9er un utilisateur",id:"cr\xe9er-un-utilisateur",level:4},{value:"Requ\xeate HTTP",id:"requ\xeate-http-2",level:5},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http-2",level:5},{value:"Modifier un utilisateur",id:"modifier-un-utilisateur",level:4},{value:"Requ\xeate HTTP",id:"requ\xeate-http-3",level:5},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http-3",level:5},{value:"Supprimer un utilisateur",id:"supprimer-un-utilisateur",level:4},{value:"R\xe9ponse HTTP",id:"r\xe9ponse-http-4",level:5},{value:"\u2713 WorkingTime API",id:"-workingtime-api",level:3},{value:"R\xe9cuperer tous les workingtimes",id:"r\xe9cuperer-tous-les-workingtimes",level:4},{value:"R\xe9cuperer un workingtime",id:"r\xe9cuperer-un-workingtime",level:4},{value:"Cr\xe9er un workingtime",id:"cr\xe9er-un-workingtime",level:4},{value:"Modifier un workingtime",id:"modifier-un-workingtime",level:4},{value:"Supprimer un workingtime",id:"supprimer-un-workingtime",level:4},{value:"\u2713 Clock API",id:"-clock-api",level:3},{value:"R\xe9cuperer les clocks",id:"r\xe9cuperer-les-clocks",level:4},{value:"Cr\xe9er une clock",id:"cr\xe9er-une-clock",level:4},{value:"Tests",id:"tests",level:2},{value:"Lancement des tests",id:"lancement-des-tests",level:3},{value:"R\xe9daction des tests",id:"r\xe9daction-des-tests",level:3},{value:"Imports requis",id:"imports-requis",level:4},{value:"D\xe9claration des constantes de test",id:"d\xe9claration-des-constantes-de-test",level:4},{value:"Corps du test",id:"corps-du-test",level:4},{value:"Exemple avec un CRUD",id:"exemple-avec-un-crud",level:4}];function o(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.ah)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"mini-project-1---api-phoenix-framework---elixir---rest-api",children:"Mini-Project #1 - API (Phoenix Framework - Elixir - Rest API)"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Objectif :"})," R\xe9aliser une API REST pour g\xe9rer une pointeuse"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Contraintes :"})," Utilisation de Phoenix Framework - Routes et sch\xe9mas impos\xe9s - Base de donn\xe9es PostgreSQL"]}),"\n",(0,r.jsx)(t.h2,{id:"initalisation-du-projet",children:"Initalisation du projet"}),"\n",(0,r.jsx)(t.p,{children:"Initalisation et acc\xe8s au projet :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"mix phx.new api --app api --no-html --no-assets\r\ncd api/\n"})}),"\n",(0,r.jsx)(t.p,{children:"Installation des d\xe9pendances :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"mix deps.get\n"})}),"\n",(0,r.jsx)(t.p,{children:"Execution des migrations / Mise en place de la base de donn\xe9es :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"mix ecto.reset\n"})}),"\n",(0,r.jsx)(t.p,{children:"Lancer le projet :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"mix phx.server\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Le projet est d\xe9sormais accessible \xe0 l'url ",(0,r.jsx)(t.a,{href:"http://localhost:4000",children:"http://localhost:4000"})]}),"\n",(0,r.jsx)(t.h2,{id:"cr\xe9ation-des-sch\xe9mas",children:"Cr\xe9ation des sch\xe9mas"}),"\n",(0,r.jsx)(t.p,{children:"La commande permettant de cr\xe9er un sch\xe9ma JSON est la suivante :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"mix phx.gen.json [context] [schema_name] [table_name] [field:type, ...]\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'users = {\r\n  "username": "string",\r\n  "email": "string"\r\n}\r\n\r\nclocks = {\r\n  "time": "datetime",\r\n  "status": "boolean",\r\n  "user": "users"\r\n}\r\n\r\nworkingtimes = {\r\n  "start": "datetime",\r\n  "end": "datetime",\r\n  "user": "users"\r\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"Nous g\xe9n\xe9rons les sch\xe9mas ci-dessus avec les commandes suivantes :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"mix phx.gen.json ApiWeb User users username:string email:string\r\nmix phx.gen.json ApiWeb Clock clocks time:datetime status:boolean user:references:users\r\nmix phx.gen.json ApiWeb WorkingTime workingtimes start:datetime end:datetime user:references:users\n"})}),"\n",(0,r.jsx)(t.h2,{id:"d\xe9finition-du-router",children:"D\xe9finition du router"}),"\n",(0,r.jsx)(t.p,{children:"Le router permet de rediriger les appels vers le bon Controller (Architechture MVC), la ligne suivante permet de 'bind' une route \xe0 un controller :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'resources "/workingtimes", WorkingTimesController, only: [:update, :delete]\n'})}),"\n",(0,r.jsx)(t.p,{children:'Le fichier "api/lib/api_web/router.ex" :'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'defmodule ApiWeb.Router do\r\n  use ApiWeb, :router\r\n\r\n  pipeline :api do\r\n    plug :accepts, ["json"] # incoming type accepted\r\n  end\r\n\r\n  scope "/api", ApiWeb do\r\n    pipe_through :api\r\n\r\n    # Links /users/* calls to UsersController file\r\n    resources "/users", UsersController, only: [:index, :show, :create, :update, :delete] \r\n    resources "/workingtimes", WorkingTimesController, only: [:update, :delete]\r\n    resources "/workingtimes/:userID", WorkingTimesController, only: [:index, :show, :create]\r\n    resources "/clocks/:userID", ClocksController, only: [:index, :create]\r\n  end\r\n\r\n  [...]\r\nend\r\n\n'})}),"\n",(0,r.jsx)(t.h2,{id:"customisation-des-routes",children:"Customisation des routes"}),"\n",(0,r.jsx)(t.p,{children:"Les routes par sont par d\xe9faut pr\xe9-g\xe9n\xe9r\xe9es, mais dans notre cas plusieurs modifications ont \xe9t\xe9 apport\xe9es pour s'adapter au sujet."}),"\n",(0,r.jsx)(t.h3,{id:"filtrage-du-r\xe9sultat-pour-matcher-un-param\xe8tre-durl",children:"Filtrage du r\xe9sultat pour matcher un param\xe8tre d'URL"}),"\n",(0,r.jsx)(t.p,{children:"Pour l'insertion d'une clock il faut le user_id, nous avons surcharg\xe9 la fonction de base index() qui permet de r\xe9cuperer l'ensemble des Clock pour qu'elle puisse traiter les cas avec/sans userID."}),"\n",(0,r.jsx)(t.p,{children:"Nous rajoutons au dessus notre fonction appel\xe9e si le parametre d'url userID est renseign\xe9 :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'# endpoint : {base_url}/clocks/:userID, method : GET\r\ndef index(conn, %{"userID" => userID}) do\r\n  userID = String.to_integer(userID)\r\n  clocks = WebApi.list_clocks()\r\n  filtered_users = Enum.filter(clocks, fn clock -> clock.user == userID end)\r\n  render(conn, :index, clocks: filtered_users)\r\nend\r\n\r\n# endpoint : {base_url}/clocks, method : GET\r\ndef index(conn, _params) do\r\n  clocks = WebApi.list_clocks()\r\n  render(conn, :index, clocks: clocks)\r\nend\n'})}),"\n",(0,r.jsx)(t.h3,{id:"ajout-dun-param\xe8tre-durl-\xe0-un-body-pour-insertion",children:"Ajout d'un param\xe8tre d'URL \xe0 un body pour insertion"}),"\n",(0,r.jsx)(t.p,{children:"Lors de l'insertion d'une Clock, on pr\xe9cise dans l'url le user_id associ\xe9, il faut rajouter ce champ au body pour pouvoir l'envoyer et l'ins\xe9rer dans la base de donn\xe9es"}),"\n",(0,r.jsx)(t.p,{children:"Le body \xe9tant de type Map, on peut utiliser les fonctions fournies par cette classe :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'# Ajoute le champ "user": ${userID} \xe0 l\'objet clocks_params\r\nclocks_params = Map.put(clocks_params, "user", userID)\n'})}),"\n",(0,r.jsx)(t.p,{children:"La fonction create() compl\xe8te :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'def create(conn, %{"clocks" => clocks_params, "userID" => userID}) do\r\n  clocks_params = Map.put(clocks_params, "user", userID)\r\n  with {:ok, %Clocks{} = clocks} <- WebApi.create_clocks(clocks_params) do\r\n    conn\r\n    |> put_status(:created)\r\n    |> put_resp_header("location", ~p"/api/clocks/#{clocks}")\r\n    |> render(:show, clocks: clocks)\r\n  end\r\nend\n'})}),"\n",(0,r.jsx)(t.h2,{id:"cors-cross-origin-resource-sharing",children:"CORS (Cross Origin Resource Sharing)"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://hexdocs.pm/cors_plug/readme.html",children:"Tutoriel Phoenix officiel"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"ajout-de-la-d\xe9pendance-cors_plug",children:"Ajout de la d\xe9pendance cors_plug"}),"\n",(0,r.jsxs)(t.p,{children:["Dans le fichier ",(0,r.jsx)(t.em,{children:"mix.exs"})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'def deps do\r\n  # ...\r\n  {:cors_plug, "~> 3.0"},\r\n  #...\r\nend\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sh",children:"# Fetch new cors dependency\r\n$ mix deps.get\n"})}),"\n",(0,r.jsx)(t.h3,{id:"mise-en-place-de-corsplug",children:"Mise en place de CORSPlug"}),"\n",(0,r.jsxs)(t.p,{children:["Dans le fichier ",(0,r.jsx)(t.em,{children:"your_app/lib/api_web/endpoint.ex"})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:"defmodule ApiWeb.Endpoint do\r\n  use Phoenix.Endpoint, otp_app: :api\r\n\r\n  # [...]\r\n\r\n  plug CORSPlug # => Enables CORS server-side\r\n  plug ApiWeb.Router\r\nend\n"})}),"\n",(0,r.jsx)(t.h3,{id:"configuration-de-corsplug",children:"Configuration de CORSPlug"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'plug CORSPlug, origin: ["http://origin1.com", "http://origin2.com"]\n'})}),"\n",(0,r.jsx)(t.h2,{id:"api-references",children:"API references"}),"\n",(0,r.jsx)(t.h3,{id:"-users-api",children:"\u2713 Users API"}),"\n",(0,r.jsx)(t.h4,{id:"r\xe9cuperer-tous-les-utilisateurs",children:"R\xe9cuperer tous les utilisateurs"}),"\n",(0,r.jsx)(t.h5,{id:"requ\xeate-http",children:"Requ\xeate HTTP"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  GET http://localhost:4000/api/users\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"email"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Optionnel"}),". L'email de l'utilisateur"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"username"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Optionnel"}),". L'username de l'utilisateur"]})]})]})]}),"\n",(0,r.jsx)(t.h5,{id:"r\xe9ponse-http",children:"R\xe9ponse HTTP"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Statut"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Raison"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"200 OK"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Succ\xe8s"})]})})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:'  HTTP/1.1 200\r\n  Content-Type: application/json\r\n\r\n{\r\n  "data": [\r\n      {\r\n          "id": 34,\r\n          "username": "test",\r\n          "email": "test@test.fr"\r\n      },\r\n      {\r\n          "id": 35,\r\n          "username": "test",\r\n          "email": "test@test.fr"\r\n      }\r\n  ]\r\n}\n'})}),"\n",(0,r.jsx)(t.h4,{id:"r\xe9cuperer-un-utilisateur",children:"R\xe9cuperer un utilisateur"}),"\n",(0,r.jsx)(t.h5,{id:"requ\xeate-http-1",children:"Requ\xeate HTTP"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  GET  http://localhost:4000/api/users/:userID\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"userID"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"integer - uid"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Id technique de l'utilisateur"]})]})})]}),"\n",(0,r.jsx)(t.h5,{id:"r\xe9ponse-http-1",children:"R\xe9ponse HTTP"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Statut"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Raison"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"200 OK"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Succ\xe8s"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"404 Not Found"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"userID inexistant"})]})]})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:'  HTTP/1.1 200\r\n  Content-Type: application/json\r\n\r\n{\r\n  "data": {\r\n      "id": 34,\r\n      "username": "test",\r\n      "email": "test@test.fr"\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"  HTTP/1.1 404\r\n  Content-Type: text/html\n"})}),"\n",(0,r.jsx)(t.h4,{id:"cr\xe9er-un-utilisateur",children:"Cr\xe9er un utilisateur"}),"\n",(0,r.jsx)(t.h5,{id:"requ\xeate-http-2",children:"Requ\xeate HTTP"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  POST  http://localhost:4000/api/users\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"username"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Nom d'utilisateur du nouvel utilisateur"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"email"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Adresse email du nouvel utilisateur"]})]})]})]}),"\n",(0,r.jsx)(t.h5,{id:"r\xe9ponse-http-2",children:"R\xe9ponse HTTP"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Statut"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Raison"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"201 Created"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Cr\xe9ation r\xe9ussie"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"400 Bad Request"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"username et/ou email manquant"})]})]})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:'  HTTP/1.1 201\r\n  Content-Type: application/json\r\n\r\n{\r\n  "data": {\r\n      "id": 37,\r\n      "username": "test",\r\n      "email": "romain.rosso@epitech.eu"\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"  HTTP/1.1 400\r\n  Content-Type: text/html\n"})}),"\n",(0,r.jsx)(t.h4,{id:"modifier-un-utilisateur",children:"Modifier un utilisateur"}),"\n",(0,r.jsx)(t.h5,{id:"requ\xeate-http-3",children:"Requ\xeate HTTP"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  PUT  http://localhost:4000/api/users/:userID\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"userID"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"integer - uid"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Id technique de l'utilisateur \xe0 modifier"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"username"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Nouveau nom d'utilisateur"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"email"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Nouvelle adresse email"]})]})]})]}),"\n",(0,r.jsx)(t.h5,{id:"r\xe9ponse-http-3",children:"R\xe9ponse HTTP"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Statut"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Raison"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"201 Created"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Cr\xe9ation r\xe9ussie"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"400 Bad Request"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"username et/ou email manquant"})]})]})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:'  HTTP/1.1 201\r\n  Content-Type: application/json\r\n\r\n{\r\n  "data": {\r\n      "id": 37,\r\n      "username": "test",\r\n      "email": "romain.rosso@epitech.eu"\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"  HTTP/1.1 400\r\n  Content-Type: text/html\n"})}),"\n",(0,r.jsx)(t.h4,{id:"supprimer-un-utilisateur",children:"Supprimer un utilisateur"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  DELETE  http://localhost:4000/api/users/:userID\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"userID"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"integer - uid"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Id technique de l'utilisateur \xe0 supprimer"]})]})})]}),"\n",(0,r.jsx)(t.h5,{id:"r\xe9ponse-http-4",children:"R\xe9ponse HTTP"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Statut"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Raison"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"200 OK"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Cr\xe9ation r\xe9ussie"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"400 Bad Request"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body manquant"})]})]})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:'  HTTP/1.1 200\r\n  Content-Type: application/json\r\n\r\n{\r\n  "data": {\r\n      "id": 37,\r\n      "username": "test",\r\n      "email": "romain.rosso@epitech.eu"\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"  HTTP/1.1 400\r\n  Content-Type: text/html\n"})}),"\n",(0,r.jsx)(t.h3,{id:"-workingtime-api",children:"\u2713 WorkingTime API"}),"\n",(0,r.jsx)(t.h4,{id:"r\xe9cuperer-tous-les-workingtimes",children:"R\xe9cuperer tous les workingtimes"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  GET http://localhost:4000/api/workingtimes/:userID?start=XXX&end=YYY\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"userID"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". L'identifiant technique de l'utilisateur associ\xe9"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"start"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"datetime - (format : dd-MM-yyyy)"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Optionnel"}),". La date \xe0 partir de laquelle chercher"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"end"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"datetime - (format: dd-MM-yyyy)"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Optionnel"}),". La date avant laquelle chercher"]})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"r\xe9cuperer-un-workingtime",children:"R\xe9cuperer un workingtime"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  GET  http://localhost:4000/api/workingtimes/:userID/:id\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"userID"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"integer - uid"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Id technique de l'utilisateur associ\xe9"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"id"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"integer - uid"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Id technique du workingtime \xe0 r\xe9cuperer"]})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"cr\xe9er-un-workingtime",children:"Cr\xe9er un workingtime"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  POST  http://localhost:4000/api/workingtimes/:userID\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"userID"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Identifiant technique de l'utilisateur associ\xe9"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"start"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"datetime - (format : dd-MM-yyyy)"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Date de d\xe9but"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"end"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"datetime - (format : dd-MM-yyyy)"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Date de fin"]})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"modifier-un-workingtime",children:"Modifier un workingtime"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  PUT  http://localhost:4000/api/workingtimes/:id\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"id"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"integer - uid"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Id technique du workingtime \xe0 modifier"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"start"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"datetime - (format : dd-MM-yyyy)"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Date de d\xe9but"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"end"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"datetime - (format : dd-MM-yyyy)"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Date de fin"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"user"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"integer - uid"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Utilisateur associ\xe9"]})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"supprimer-un-workingtime",children:"Supprimer un workingtime"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  DELETE  http://localhost:4000/api/workingtimes/:id\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"id"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"integer - uid"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Id technique du workingtime \xe0 supprimer"]})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"-clock-api",children:"\u2713 Clock API"}),"\n",(0,r.jsx)(t.h4,{id:"r\xe9cuperer-les-clocks",children:"R\xe9cuperer les clocks"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  GET http://localhost:4000/api/clocks/:userID\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"userID"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". L'identifiant technique de l'utilisateur associ\xe9"]})]})})]}),"\n",(0,r.jsx)(t.h4,{id:"cr\xe9er-une-clock",children:"Cr\xe9er une clock"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",children:"  POST http://localhost:4000/api/clocks/:userID\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type technique"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type de param\xe8tre"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"userID"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"URL"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". L'identifiant technique de l'utilisateur associ\xe9"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"time"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:'datetime - (format : "dd-MM-yyyy")'})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". L'heure de la clock"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"status"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"boolean"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Body"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Obligatoire"}),". Le status de la clock"]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"tests",children:"Tests"}),"\n",(0,r.jsx)(t.h3,{id:"lancement-des-tests",children:"Lancement des tests"}),"\n",(0,r.jsx)(t.p,{children:"Phoenix permet de r\xe9diger des tests avec une syntaxe particuli\xe8re assez r\xe9p\xe9titive et simple \xe0 assimiler"}),"\n",(0,r.jsx)(t.p,{children:"La commande ci-dessous permet de lancer les test :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sh",children:"mix test\n"})}),"\n",(0,r.jsx)(t.h3,{id:"r\xe9daction-des-tests",children:"R\xe9daction des tests"}),"\n",(0,r.jsxs)(t.p,{children:["Pour r\xe9diger les tests en Phoenix, nous allons dans le dossier ",(0,r.jsx)(t.em,{children:"your_app/test/api_web/controllers"}),", un fichier par controller est d\xe9j\xe0 pr\xe9-g\xe9n\xe9r\xe9, nous allons les supprimer pour r\xe9diger les tests selon les specificit\xe9s ad\xe9quates"]}),"\n",(0,r.jsxs)(t.p,{children:["Cr\xe9er un fichier ",(0,r.jsx)(t.strong,{children:"users_controller_test.exs"})]}),"\n",(0,r.jsx)(t.h4,{id:"imports-requis",children:"Imports requis"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:"# ConnCase to use database connection\r\nuse ApiWeb.ConnCase, async: false\r\n\r\n# WebApiFixtures to generate fake data\r\nimport Api.WebApiFixtures\r\n\r\n# Users model since we are building users_controller_test.exs\r\nalias Api.WebApi.Users\n"})}),"\n",(0,r.jsx)(t.h4,{id:"d\xe9claration-des-constantes-de-test",children:"D\xe9claration des constantes de test"}),"\n",(0,r.jsx)(t.p,{children:"Il est possible de cr\xe9er des objets (JSON) contenant des constantes qui seront utilis\xe9es pour les tests"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'@create_attrs %{\r\n  username: "dummy username",\r\n  email: "dummy@gmail.com"\r\n}\r\n\r\n@update_attrs %{\r\n  username: "dummy new username",\r\n  email: "newdummy@gmail.com"\r\n}\r\n\r\n@invalid_attrs %{\r\n  username: nil,\r\n  email: nil\r\n}\r\n\r\n@invalid_email %{\r\n  username: "any username",\r\n  email: "i have wrong format"\r\n}\n'})}),"\n",(0,r.jsx)(t.h4,{id:"corps-du-test",children:"Corps du test"}),"\n",(0,r.jsxs)(t.p,{children:["Pour r\xe9diger un test, il faut ouvrir un block ",(0,r.jsx)(t.strong,{children:"test"})]}),"\n",(0,r.jsx)(t.p,{children:"Les diff\xe9rentes routes peuvent \xeatre test\xe9es gr\xe2ce \xe0 cet appel :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'# method GET\r\nconn = get(conn, ~p"/api/users/#{userID}")\r\n\r\n# method POST\r\nconn = post(conn, ~p"/api/users", users: @create_attrs)\r\n\r\n# method PUT\r\nconn = put(conn, ~p"/api/users/#{userID}", users: @update_attrs)\r\n\r\n# method DELETE\r\nconn = delete(conn, ~p"/api/users/#{userID}")\n'})}),"\n",(0,r.jsx)(t.p,{children:"Les traitements de resultat se font via des assertions similaires aux autres langages (comme JUnit par exemple) :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'\r\n# Declare constants for incoming tests\r\n@create_attrs %{\r\n  username: "dummy username",\r\n  email: "dummy@gmail.com"\r\n}\r\n\r\n# Describe the test\r\ntest "| Should return 201 and a data field containing inserted user after inserting a user with correct body", %{conn: conn} do\r\n\r\n  # API self call, method: POST\r\n  conn = post(conn, ~p"/api/users", users: @create_attrs)\r\n\r\n  # Asserting wether the result is the excpected one or not\r\n  assert json_response(conn, 201)["data"] == %{\r\n    "id" => userID,\r\n    "username"=> "dummy username",\r\n    "email" => "dummy@gmail.com"\r\n  }\r\nend\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'# declare a new test with it\'s description\r\ntest "| Should not create users and return 422 error because of invalid data", %{conn: conn} do\r\n\r\n  # API self call, method: POST\r\n  conn = post(conn, ~p"/api/users", users: @invalid_attrs)\r\n\r\n  # asserting wether the result is the excpected one or not\r\n  assert json_response(conn, 422)["errors"] != %{}\r\nend\n'})}),"\n",(0,r.jsx)(t.h4,{id:"exemple-avec-un-crud",children:"Exemple avec un CRUD"}),"\n",(0,r.jsx)(t.p,{children:"Ci-dessous un ensemble de test qui permet de valider le bon fonctionnement d'une table User ainsi que de son CRUD avec le sch\xe9ma suivant :"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"type User = {\r\n  id: integer,\r\n  username: string,\r\n  email: string\r\n}\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-elixir",children:'defmodule ApiWeb.UsersControllerTest do\r\n  use ApiWeb.ConnCase, async: false\r\n\r\n  import Api.WebApiFixtures\r\n\r\n  alias Api.WebApi.Users\r\n\r\n  @create_attrs %{\r\n    username: "dummy username",\r\n    email: "dummy@gmail.com"\r\n  }\r\n\r\n  @update_attrs %{\r\n    username: "dummy new username",\r\n    email: "newdummy@gmail.com"\r\n  }\r\n\r\n  @invalid_attrs %{username: nil, email: nil}\r\n\r\n  @invalid_email %{username: "any username", email: "i have wrong format"}\r\n\r\n  setup %{conn: conn} do\r\n    {:ok, conn: put_req_header(conn, "accept", "application/json")}\r\n  end\r\n\r\n  describe "\u2713 Testing Users" do\r\n\r\n    setup [:create_users]\r\n\r\n    test "| Should return an array named data with status code 200", %{conn: conn} do\r\n      conn = get(conn, ~p"/api/users")\r\n      assert json_response(conn, 200)["data"]\r\n    end\r\n\r\n    test "| Should create user and return it\'s datas", %{conn: conn} do\r\n      conn = post(conn, ~p"/api/users", users: @create_attrs)\r\n      assert %{"id" => id} = json_response(conn, 201)["data"]\r\n\r\n      conn = get(conn, ~p"/api/users/#{id}")\r\n\r\n      assert %{\r\n               "id" => ^id,\r\n               "email" => "dummy@gmail.com",\r\n               "username" => "dummy username"\r\n             } = json_response(conn, 200)["data"]\r\n    end\r\n\r\n    test "| Should not create users and return 422 error because of invalid data", %{conn: conn} do\r\n      conn = post(conn, ~p"/api/users", users: @invalid_attrs)\r\n      assert json_response(conn, 422)["errors"] != %{}\r\n    end\r\n\r\n    test "| Should renders user when data is valid", %{conn: conn, users: %Users{id: id} = users} do\r\n      conn = put(conn, ~p"/api/users/#{users}", users: @update_attrs)\r\n      assert %{"id" => ^id} = json_response(conn, 200)["data"]\r\n\r\n      conn = get(conn, ~p"/api/users/#{id}")\r\n\r\n      assert %{\r\n               "id" => ^id,\r\n               "email" => "newdummy@gmail.com",\r\n               "username" => "dummy new username"\r\n             } = json_response(conn, 200)["data"]\r\n    end\r\n\r\n    test "| Should throw 422 if data is missing", %{conn: conn, users: users} do\r\n      conn = put(conn, ~p"/api/users/#{users}", users: @invalid_attrs)\r\n\r\n      assert json_response(conn, 422)["errors"] != %{\r\n               email: "can\'t be blank",\r\n               username: "can\'t be blank"\r\n             }\r\n    end\r\n\r\n    test "| Should warn that email format is invalid", %{conn: conn, users: users} do\r\n      conn = put(conn, ~p"/api/users/#{users}", users: @invalid_email)\r\n\r\n      assert json_response(conn, 422)["errors"] != %{\r\n               email: "can\'t be blank",\r\n               username: "can\'t be blank"\r\n             }\r\n    end\r\n\r\n    setup [:create_users]\r\n\r\n    test "| Should deletes user by id", %{conn: conn, users: users} do\r\n      conn = delete(conn, ~p"/api/users/#{users}")\r\n      assert response(conn, 200)\r\n\r\n      assert_error_sent(404, fn ->\r\n        get(conn, ~p"/api/users/#{users}")\r\n      end)\r\n    end\r\n  end\r\n\r\n  defp create_users(_) do\r\n    users = users_fixture()\r\n    %{users: users}\r\n  end\r\nend\n'})})]})}function h(e={}){const{wrapper:t}={...(0,s.ah)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},3905:(e,t,n)=>{n.d(t,{ah:()=>a});var r=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var c=r.createContext({}),a=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},o={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,s=e.mdxType,l=e.originalType,c=e.parentName,h=d(e,["components","mdxType","originalType","parentName"]),u=a(n),x=s,p=u["".concat(c,".").concat(x)]||u[x]||o[x]||l;return n?r.createElement(p,i(i({ref:t},h),{},{components:n})):r.createElement(p,i({ref:t},h))}));h.displayName="MDXCreateElement"}}]);